# Example process definitions for the Demesne domain
name: Demesne Processes

processes:
# Manufacturing process
- path: process/production/forging_horseshoes
  name: "Forging Horseshoes (Set of 4)"
  
  time:
    base_duration: 2.0 # Hours
  requirements:
    - name: smithy_forge
      scope: structure/smithy_forge
    - name: hammer
      scope: goods/tools/crafts/smithing/hammer
      mtbf: 600.0
    - name: anvil
      scope: goods/tools/crafts/smithing/anvil
      mtbf: 5000.0
    - name: blacksmith
      scope: tasks/blacksmith
      quantity: 1

  inputs:
    - name: wrought_iron
      scope: materials/intermediate/metal_stock/wrought_iron
      quantity: 1.5
    - name: charcoal
      scope: materials/fuel/charcoal
      quantity: 5.0

  outputs:
    - name: horseshoe
      scope: goods/tools/transport/tack/horseshoe
      quantity: 4
    - name: slag
      scope: materials/resource/waste/slag
      quantity: 0.2

# Natural process example
# spoilage process
- path: process/spoilage/vegetable
  name: "Generic Vegetable Spoilage"
  
  # TIMING (Float = Hours)
  # 21 days * 24 hours = 504.0 hours
  time:
    base_duration: 504.0
 
  inputs:
    - name: vegetable_source
      scope: source/plant/species/vegetable

  outputs:
    - name: rotting_matter
      scope: item/organic/waste/rotting_matter

# --- CULTIVATION PROCESSES (Bread Cycle) ---

- path: process/cultivation/ploughing
  name: "Ploughing Fallow Land"
  
  time:
    base_duration: 8.0 # Hours per unit (acre), the definition of an acre. 
  requirements:
    - name: plow
      scope: goods/tools/agriculture/plow
      mtbf: 200.0
    - name: yoke
      scope: goods/tools/transport/tack/yoke
      mtbf: 500.0
    - name: ploughman
      scope: social/tasks/ploughman
      quantity: 1
    - name: oxen
      scope: animals/domestic/ox/male/mature
      quantity: 2

  inputs:
    - name: crop_land
      scope: land/cultivated/crop

  outputs:
    - name: tilled_land
      scope: land/cultivated/crop/tilled

- path: process/cultivation/sowing
  name: "Generic Sowing"
  
  time:
    base_duration: 4.0
  requirements:
    - name: peasant
      scope: social/tasks/peasant
      quantity: 1

  inputs:
    - name: tilled_land
      scope: land/cultivated/crop/tilled
    - name: seed_stock
      scope: item/organic/plant/seed_stock
      # plant-specific quantities are represented externally; default here
      quantity: 1.0

  outputs:
    - name: seeded_land
      scope: land/cultivated/crop/seeded


- path: process/cultivation/harvesting
  name: "Generic Harvesting (Crop → Harvested)"
  
  time:
    base_duration: 16.0
    by_plant:
      source/plant/species/cereal/wheat: 16.0
      source/plant/species/cereal/rye: 16.0
      source/plant/species/cereal/barley: 16.0
      source/plant/species/cereal/oats: 16.0
      source/plant/species/legume/pea: 12.0
      source/plant/species/legume/bean: 12.0
      source/plant/species/vegetable/onion: 24.0
      source/plant/species/vegetable/leek: 32.0
      source/plant/species/vegetable/cabbage: 24.0
      source/plant/species/vegetable/beet: 20.0
      source/plant/species/vegetable/carrot: 20.0
      source/plant/species/fiber/flax: 12.0
      source/plant/species/fiber/hemp: 24.0
      source/plant/species/herb/garlic: 18.0
      source/plant/species/herb/mustard: 12.0
  requirements:
    - name: harvesting_tool
      scope: item/goods/tools/agriculture/harvesting
      mtbf: 100.0
    - name: peasant_crew
      scope: social/tasks/peasant
      quantity: 4

  inputs:
    - name: harvestable_land
      scope: land/cultivated/crop/harvestable

  outputs:
    - name: harvested_land
      scope: land/cultivated/crop/harvested
    - name: sheaf
      scope: item/organic/plant/sheaf
      quantity: 1.0

# --- NATURAL GROWTH PROCESSES (crop) ---
# Progression for crops from seeded → growing → harvestable → wilted
# process/crop/germination
# process/crop/growth
# process/crop/ripening
# process/crop/wilting

- path: process/crop/germination
  name: "Generic germination (Early Stage)"
  type: natural
  time:
    base_duration: 168.0 
    by_plant:
      source/plant/species/cereal/wheat: 168
      source/plant/species/cereal/rye: 168
      source/plant/species/cereal/barley: 168
      source/plant/species/cereal/oats: 168
      source/plant/species/legume/pea: 168
      source/plant/species/legume/bean: 336
      source/plant/species/vegetable/onion: 336
      source/plant/species/vegetable/leek: 336
      source/plant/species/vegetable/cabbage: 168
      source/plant/species/vegetable/beet: 168
      source/plant/species/vegetable/carrot: 336
      source/plant/species/fiber/flax: 168
      source/plant/species/fiber/hemp: 168
      source/plant/species/herb/garlic: 336
      source/plant/species/herb/mustard: 120
  inputs:
    - name: seeded_land
      scope: land/cultivated/crop/seeded

  outputs:
    - name: growing_early
      scope: land/cultivated/crop/growing/early

- path: process/crop/growth
  name: "Generic Growth (Early Stage)"
  type: natural
  time:
    base_duration: 1500.0 # default (~62.5 days) if plant not listed
    by_plant:
      source/plant/species/cereal/wheat: 1512
      source/plant/species/cereal/rye: 1344
      source/plant/species/cereal/barley: 1176
      source/plant/species/cereal/oats: 1344
      source/plant/species/legume/pea: 1008
      source/plant/species/legume/bean: 1680
      source/plant/species/vegetable/onion: 1680
      source/plant/species/vegetable/leek: 2016
      source/plant/species/vegetable/cabbage: 2016
      source/plant/species/vegetable/beet: 1344
      source/plant/species/vegetable/carrot: 1680
      source/plant/species/fiber/flax: 1008
      source/plant/species/fiber/hemp: 1680
      source/plant/species/herb/garlic: 2352
      source/plant/species/herb/mustard: 672
  inputs:
    - name: growing_early
      scope: land/cultivated/crop/growing/early

  outputs:
    - name: growing_late
      scope: land/cultivated/crop/growing/late

- path: process/crop/ripening
  name: "Generic Ripening"
  type: natural
  time:
    base_duration: 720.0 # default (~30 days) if plant not listed
    by_plant:
      source/plant/species/cereal/wheat: 1008
      source/plant/species/cereal/rye: 1008
      source/plant/species/cereal/barley: 840
      source/plant/species/cereal/oats: 840
      source/plant/species/legume/pea: 504
      source/plant/species/legume/bean: 672
      source/plant/species/vegetable/onion: 672
      source/plant/species/vegetable/leek: 1008
      source/plant/species/vegetable/cabbage: 672
      source/plant/species/vegetable/beet: 672
      source/plant/species/vegetable/carrot: 672
      source/plant/species/fiber/flax: 672
      source/plant/species/fiber/hemp: 1008
      source/plant/species/herb/garlic: 840
      source/plant/species/herb/mustard: 504
  inputs:
    - name: growing_late
      scope: land/cultivated/crop/growing/late

  outputs:
    - name: harvestable_land
      scope: land/cultivated/crop/harvestable

- path: process/crop/wilting
  name: "Generic Wilting (Harvestable → Wilted)"
  type: natural
  time:
    base_duration: 168.0  # default hours (~1 week) if plant not listed
    by_plant:
      source/plant/species/cereal/wheat: 336
      source/plant/species/cereal/rye: 336
      source/plant/species/cereal/barley: 336
      source/plant/species/cereal/oats: 336
      source/plant/species/legume/pea: 168
      source/plant/species/legume/bean: 504
      source/plant/species/vegetable/onion: 672
      source/plant/species/vegetable/leek: 1344
      source/plant/species/vegetable/cabbage: 1344
      source/plant/species/vegetable/beet: 1008
      source/plant/species/vegetable/carrot: 672
      source/plant/species/fiber/flax: 168
      source/plant/species/fiber/hemp: 504
      source/plant/species/herb/garlic: 504
      source/plant/species/herb/mustard: 336
  inputs:
    - name: harvestable_land
      scope: land/cultivated/crop/harvestable

  outputs:
    - name: wilted_land
      scope: land/cultivated/crop/wilted

# --- PROCESSING PROCESSES (Bread Cycle) ---

- path: process/processing/threshing
  name: "Generic Threshing (Sheaves → Grain + Straw/Chaff)"
  
  time:
    base_duration: 8.0
  requirements:
    - name: threshing_floor
      scope: item/structure/communal_threshing_floor
    - name: flail
      scope: item/goods/tools/agriculture/harvesting/flail
      mtbf: 50.0
    - name: peasant_crew
      scope: social/tasks/peasant
      quantity: 2

  inputs:
    - name: sheaf
      scope: item/organic/plant/sheaf

  outputs:
    - name: grain
      scope: item/organic/plant/grain
      quantity: 1.0
    - name: straw
      scope: item/organic/plant/straw
      quantity: 1.0
    - name: chaff
      scope: item/organic/plant/chaff
      quantity: 1.0

- path: process/processing/milling_wheat
  name: "Milling Wheat"
  time:
    base_duration: 4.0
  requirements:
    - name: mill
      scope: item/structure/mill
    - name: miller
      scope: social/tasks/miller
      quantity: 1

  inputs:
    - name: grain
      scope: item/organic/plant/grain
      quantity: 100.0

  outputs:
    - name: flour
      scope: item/organic/plant/flour
      quantity: 90.0
    - name: bran
      scope: item/organic/plant/bran
      quantity: 10.0


- path: process/processing/baking_bread
  name: "Baking Wheat Bread"
  time:
    base_duration: 6.0
  requirements:
    - name: bakehouse
      scope: item/structure/bakehouse
    - name: baker
      scope: social/tasks/baker
      quantity: 1

  inputs:
    - name: flour
      scope: item/organic/plant/flour
      quantity: 10.0
    - name: water
      scope: source/inorganic/water/drinking_water
      quantity: 5.0
    - name: fuel
      scope: source/inorganic/fuel/charcoal
      quantity: 2.0

  outputs:
    - name: wheat_loaf
      scope: item/goods/food/bread/wheat_loaf
      quantity: 20

# --- SPOILAGE PROCESSES (Bread Cycle) ---

- path: process/spoilage/flour
  name: "Flour Spoilage"
  
  time:
    mtbf: 4000.0 # ~6 months median
  inputs:
    - name: flour
      scope: item/organic/plant/flour

  outputs:
    - name: rotting_matter
      scope: item/organic/waste/rotting_matter

- path: process/spoilage/bread
  name: "Bread Staling"
  
  time:
    mtbf: 72.0 # 3 days median
  inputs:
    - name: bread
      scope: item/goods/food/bread

  outputs:
    - name: rotting_matter
      scope: item/organic/waste/rotting_matter

# --- ANIMAL GROWTH PROCESSES (Sheep Cycle) ---

- path: process/growth/sheep_lamb_to_juvenile
  name: "Sheep Growth (Lamb -> mature)"
  
  time:
    base_duration: 2160.0 # ~3 months (90 days)
  inputs:
    - name: juvenile_sheep
      scope: animals/domestic/sheep/male/juvenile

  outputs:
    - name: mature_sheep
      scope: animals/domestic/sheep/male/mature

- path: process/growth/sheep_gestation
  name: "Sheep Gestation"
  
  time:
    base_duration: 3600.0 # ~5 months (150 days)
  inputs:
    - name: mature_ewe
      scope: animals/domestic/sheep/female/mature

  outputs:
    - name: mature_ewe
      scope: animals/domestic/sheep/female/mature
    - name: lamb
      scope: animals/domestic/sheep/male/juvenile

# --- CHARCOAL PRODUCTION CYCLE ---

- path: process/extraction/felling_timber
  name: "Felling Timber for Charcoal"
  time:
    base_duration: 8.0 # Hours per tree or small stand
  requirements:
    - name: axe
      scope: goods/tools/handtools/axe
      mtbf: 300.0
    - name: forester
      scope: tasks/forester
      quantity: 2

  inputs:
    - name: wooded_land
      scope: land/wild/wooded

  outputs:
    - name: timber
      scope: item/goods/stock/wood/timber
      quantity: 1.0

- path: process/nature/wood_seasoning
  name: "Wood Seasoning (Air-dry)"
  time:
    base_duration: 3024.0 # ~4 months (seasoning)
  inputs:
    - name: timber
      scope: item/goods/stock/wood/timber

  outputs:
    - name: seasoned_timber
      scope: item/goods/stock/wood/seasoned
      quantity: 1.0

- path: process/production/charcoal_burning
  name: "Charcoal Burning (Clamp)"
  time:
    base_duration: 72.0 # ~3 days for a clamp burn
  requirements:
    - name: charcoal_clamp
      scope: structure/charcoal_clamp
    - name: forester
      scope: social/tasks/forester
      quantity: 2
    - name: axe
      scope: item/goods/tools/handtools/axe
      mtbf: 300.0

  inputs:
    - name: seasoned_timber
      scope: item/goods/stock/wood/seasoned
      quantity: 10.0

  outputs:
    - name: charcoal
      scope: item/goods/fuel/charcoal
      quantity: 3.0
    - name: ash
      scope: item/organic/plant/ash_material
      quantity: 2.0










